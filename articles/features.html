<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Features • wdiquickplots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Features">
<meta property="og:description" content="wdiquickplots">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-3E8SNHMP6Y"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3E8SNHMP6Y');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wdiquickplots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/wdiquickplots.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/features.html">Features</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/edalfon/wdiquickplots/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="features_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Features</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/edalfon/wdiquickplots/blob/HEAD/vignettes/features.Rmd" class="external-link"><code>vignettes/features.Rmd</code></a></small>
      <div class="hidden name"><code>features.Rmd</code></div>

    </div>

    
    
<p>This document describes a few features of the package and documents some admittedly controversial design decisions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edalfon/wdiquickplots" class="external-link">wdiquickplots</a></span><span class="op">)</span></code></pre></div>
<div class="section level1">
<h1 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h1>
<div class="section level2">
<h2 id="facet-by-regions-or-world-banks-income-groups">Facet by regions or World Bank’s income groups<a class="anchor" aria-label="anchor" href="#facet-by-regions-or-world-banks-income-groups"></a>
</h2>
<p>Some of the plots have facets and you can configure whether they group the data by geographical regions or income groups. Simply pass unquoted <code>region</code> or <code>income</code> to the <code>facets</code> argument.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_dist_wdi.html">plot_dist_wdi</a></span><span class="op">(</span><span class="st">"NY.GDP.PCAP.PP.CD"</span>, facets <span class="op">=</span> <span class="va">income</span>, p <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot_dist_wdi.html">plot_dist_wdi</a></span><span class="op">(</span><span class="st">"NY.GDP.PCAP.PP.CD"</span>, facets <span class="op">=</span> <span class="va">region</span>, p <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<p><img src="features_files/figure-html/dist-1.svg" width="45%"><img src="features_files/figure-html/dist-2.svg" width="45%"></p>
</div>
<div class="section level2">
<h2 id="subsetting-the-data">Subsetting the data<a class="anchor" aria-label="anchor" href="#subsetting-the-data"></a>
</h2>
<p>By default, <code>wdiquickplots</code> shows the data for all countries available. But it provides three ways to subset the countries to include in the plot. There are three arguments for this:</p>
<ul>
<li>
<code>country</code> let’s you arbitrarily select countries (1…*). We pass this argument directly to WDI, hence you need to use ISO-2 character code to indicate the countries (see <code>?WDI::WDI()</code>). As in WDI, this defaults to “all”.</li>
<li>
<code>regions</code> let’s you select a group of countries, indicating World Bank regions. <code>wdiquickplots:::regions</code>
</li>
<li>
<code>income_groups</code> let’s you select a group of countries, indicating World Bank’s income classification. <code>wdiquickplots:::income</code>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_dist_wdi.html">plot_dist_wdi</a></span><span class="op">(</span>
  indicator <span class="op">=</span> <span class="st">"NY.GDP.PCAP.PP.CD"</span>, facets <span class="op">=</span> <span class="va">region</span>, p <span class="op">=</span> <span class="fl">0</span>, 
  regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Europe &amp; Central Asia"</span>, <span class="st">"Latin America &amp; Caribbean"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="features_files/figure-html/dist_subset-1.svg" width="77%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level1">
<h1 id="watch-out">Watch out<a class="anchor" aria-label="anchor" href="#watch-out"></a>
</h1>
<div class="section level2">
<h2 id="latest-available-data-point-per-country">Latest available data point per country<a class="anchor" aria-label="anchor" href="#latest-available-data-point-per-country"></a>
</h2>
<p>In all plotting functions you can specify the period to download the data (<code>start</code> and <code>end</code> year). However, some plots do not show the time series but only one point in time per country. In those cases, <strong>the default is to keep the latest available data point for each country</strong>.</p>
<p>This is to try to keep as many countries as possible in the data to plot. So, instead of dropping countries with missing data for the last year, we would rather keep them and tolerate them with somewhat older data.</p>
<p>The implication is that the plot can contain non-comparable data, and end-up mixing different years for different countries.</p>
<p>Of course, that can be controversial and certainly it is not ideal. To this, we would say a couple of things:</p>
<ul>
<li>
<strong>You can always opt-out of this default and force <code>wdiquickplots</code> to show the same year for all countries.</strong> To do this, simply set <code>start</code> and <code>end</code> to the same value. Thus, you ensure comparability. Just keep in mind that the countries without data for that year will be simply dropped and not shown in the plot.</li>
<li>
<strong>Sometimes it may be ok.</strong> This is the default behavior because we think sometimes it is ok. For example, for some indicators that do not change much over time, it may be better to have older data points for some countries, than to drop them altogether. That way you can at least have an idea where all those countries stand, even though their data are somewhat old. So, in this sense we defend this behavior, but …</li>
<li>
<strong>The plots try to be transparent about it, and you should too.</strong> All the plots where this is the case try to warn about the issue. But not many details can be included in the plot because doing so, we would risk ending-up with an over-cluttered plot. Thus, the users of the plots should also warn their audience and be transparent about it.</li>
</ul>
</div>
<div class="section level2">
<h2 id="further-customization">Further customization<a class="anchor" aria-label="anchor" href="#further-customization"></a>
</h2>
<p>Main features have been described already in this site. And some of the plots allow for some more customization. But not much really. For example, the bar plot allows the user to customize the colors (see <code><a href="../reference/plot_bar_wdi.html">?plot_bar_wdi</a></code>) but you cannot turn it into a lollipop plot. In addition, you get the plot objects prepared by <code>wdiquickplots</code> (e.g. <code>ggplot2</code> object) and you can go wild (e.g. override <code>scale_fill_brewer</code> to change color palette, you can even remove or change facets).</p>
<p>And although you can do that, it is certainly not in line with the spirit of this package. Quick plots!, if you have to fiddle too long with arguments and trying to change too many things on the plot, it is not a quick plot anymore. That would also indicate you need something different than the prefabricated plots in this package. In those cases, you are probably better off using directly <code>WDI</code> to get the data and make your own plot.</p>
</div>
<div class="section level2">
<h2 id="interpolation-for-smooth-animated-plots">Interpolation for smooth animated plots<a class="anchor" aria-label="anchor" href="#interpolation-for-smooth-animated-plots"></a>
</h2>
<p>Frequently there will be missing values here and there in the WDI data. <code>NA</code> for some years and some countries will be most probably the norm. That would make the race plot unworkable because countries (in the y-axis) will go in and out of the plot. For a race plot, it is key to keep the set of categories constant in time. Having this in mind, for the race plot we keep all countries that have at least one non-missing value in the period of time for the plot. And to keep all countries in all years, we just replace missing values by interpolating between valid values for each country.</p>
<p>Animated bubble plots are much more noisy without interpolation. Missing values would be basically points that would go in and out of the plot, and that movement would be animated creating just confusion. So, we also use interpolated data for those animated plots.</p>
<p>In all cases, we put in the plot indicators whenever an interpolated point for a highlighted country is being shown. Those warning signs are superscript numbers, ¹, ², ³, and they signal, respectively, that the x, y or size indicators have been interpolated. Hopefully that’s transparent enough.</p>
</div>
<div class="section level2">
<h2 id="memoise-wdi-calls">memoise WDI calls<a class="anchor" aria-label="anchor" href="#memoise-wdi-calls"></a>
</h2>
<p>Although we are always dealing with rather small datasets in this package, every <code>WDI</code> call is still an API call to download the data. To speed things up a little and avoid downloading the same data again and again (e.g. to use the same data for two different plots), we <code>memoise</code> WDI calls. We use <code><a href="https://memoise.r-lib.org/reference/cache_filesystem.html" class="external-link">memoise::cache_filesystem</a></code> which should be persistent across R sessions. Cache location is ~/wdiquickplots_cache.</p>
<p><code>memoise</code> does a great job. But as the famous quote goes, there are only two hard things, cache invalidation and naming things. So, if you ever think caching <code>WDI</code> calls is creating problems, just delete the cache either by running <code>memoise::forget(wdiquickplots:::memoised_wdi)</code> or just finding the cache in your file system and deleting the directory.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Eduardo Alfonso-Sierra.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
